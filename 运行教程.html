<html>
<body>
    <p>SSO比单纯的一个Web站点要复杂，不按以下步骤配置会打不开工程站点，也无法运行。</p>
    <p>为避免不必要的弯路，请务必严格参照本配置执行。</p>
    <p>
        执行中有问题的，请在此回复交流：http://www.cnblogs.com/baibaomen/p/sso-full-code.html。
        也望成功运行的童鞋回复响应下，看到你们有所收获是我开发更多实战教程的最大动力:)
    </p>
    <p>请右键浏览器打开本页面，便于查看以下混排了配置截图的三个步骤说明。</p>
    <p>
        <b>第一步：将解决方案在D盘根目录解压，会生成D:\BaibaomenSsoLesson。如果设到其它目录，后面的相关步骤也要变。</b>
    </p>
    <p>
        <b>第二步：在hosts添加测试域名的解析</b>
    </p>
    <p>
        2.1: 以管理员身份打开写字板
    </p>
    <p>
        2.2：在写字板中打开文件“C:\Windows\System32\drivers\etc\hosts”
    </p>
    <p>
        2.3: 在该文件末尾追加如下三行。作用是添加三个测试域名，并把它们指向本地：
    </p>
    <pre>
        127.0.0.1 sso.baibaomen.com
        127.0.0.1 php-client.cn
        127.0.0.1 java-client.net</pre>
    <p>
        2.4： 验证操作。运行cmd，依次ping这三个域名，检查是否正确指向127.0.0.1。
    </p>
    <p>
        <b>第三步：安装https测试用证书</b>
    </p>
    <p>
        3.1 点这里下载测试证书：<a href="https://www.baibaomen.com/sso/wildcard.baibaomen.com.pfx" target="_blank">https://www.baibaomen.com/sso/wildcard.baibaomen.com.pfx</a>。
    </p>
    <p>
        3.2 运行命令“mmc”打开控制台管理单元，点击“文件”-&gt;“添加或删除管理单元”-&gt;“证书”-&gt;点“添加&gt;”按钮-&gt;弹出框中选择“计算机账户”后点击“下一步”、“完成”关闭本弹窗-&gt;点“确定”完成证书管理单元的添加。<br /><br />
        <img src="http://www.baibaomen.com/sso/%E6%B7%BB%E5%8A%A0%E8%AF%81%E4%B9%A6%E7%AE%A1%E7%90%86.png" style="max-width:100%" />
    </p>
    <p>
        3.3 依次展开“证书”-&gt;“个人”-&gt;“证书”；右键“所有任务”-&gt;“导入”-&gt;“下一步”；点“浏览”，弹窗注意更改文件类型为.pfx格式的，然后选择刚下载的证书，连续点击下一步直到完成导入。<br /><br />
        <img src="http://www.baibaomen.com/sso/%E5%B7%B2%E6%B7%BB%E5%8A%A0%E8%AF%81%E4%B9%A6.png" style="max-width:100%" />
    </p>
    <p>
        3.4 依次展开“证书”-&gt;“受信任的根证书颁发机构”-&gt;“证书”；右键“所有任务”-&gt;“导入”-&gt;“下一步”；点“浏览”，弹窗注意更改文件类型为.pfx格式的，然后选择刚下载的证书，连续点击下一步直到完成导入。
    </p>
    <p>
        <b>第四步：IIS站点配置</b>
    </p>
    <p>
        4.1 选择相应web站点工程目录，在IIS中如下图创建三个站点。应用程序池选.NET4.0，集成模式管道模式。<br /><br />
        <img src="http://www.baibaomen.com/sso/sso.baibaomen.com%E9%85%8D%E7%BD%AE.png" /><br />
        <img src="http://www.baibaomen.com/sso/java-client.net%E9%85%8D%E7%BD%AE.png" /><br />
        <img src="http://www.baibaomen.com/sso/php-client.cn%E9%85%8D%E7%BD%AE.png" /><br />
    </p>
    <p>
        4.2 对sso.baibaomen.com添加https绑定。注意选择证书*.baibaomen.com。
    </p>
    <p>至此完成所有设置，请打开解决方案，F5运行体验！</p>
</body>
</html>
